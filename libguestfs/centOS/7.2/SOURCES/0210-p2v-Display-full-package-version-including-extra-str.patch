From ba229d940e2c2f0faca34194e8cfdabc1fccd16b Mon Sep 17 00:00:00 2001
From: "Richard W.M. Jones" <rjones@redhat.com>
Date: Wed, 5 Aug 2015 12:55:42 +0100
Subject: [PATCH] p2v: Display full package version (including extra string) in
 p2v.ks file.

(cherry picked from commit f3ed65525c1b0255463a85e3d459debabfbfcfa9)
---
 p2v/p2v.ks.in                  | 2 +-
 p2v/virt-p2v-make-kickstart.in | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/p2v/p2v.ks.in b/p2v/p2v.ks.in
index 94c2dfe..a14ee46 100644
--- a/p2v/p2v.ks.in
+++ b/p2v/p2v.ks.in
@@ -15,7 +15,7 @@
 # along with this program; if not, write to the Free Software
 # Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 
-# Generated by virt-p2v-make-kickstart __PACKAGE_VERSION__.
+# Generated by virt-p2v-make-kickstart __PACKAGE_VERSION_FULL__
 
 lang en_US.UTF-8
 keyboard us
diff --git a/p2v/virt-p2v-make-kickstart.in b/p2v/virt-p2v-make-kickstart.in
index 70d7782..47afca0 100644
--- a/p2v/virt-p2v-make-kickstart.in
+++ b/p2v/virt-p2v-make-kickstart.in
@@ -157,6 +157,7 @@ done
   '{
     gsub (/__PACKAGE_NAME__/, "@PACKAGE_NAME@");
     gsub (/__PACKAGE_VERSION__/, "@PACKAGE_VERSION@");
+    gsub (/__PACKAGE_VERSION_FULL__/, "@PACKAGE_VERSION_FULL@");
     gsub (/__BASE64_ISSUE__/, base64_issue);
     gsub (/__BASE64_LAUNCH_VIRT_P2V__/, base64_launch_virt_p2v);
     gsub (/__BASE64_P2V_SERVICE__/, base64_p2v_service);
-- 
1.8.3.1

